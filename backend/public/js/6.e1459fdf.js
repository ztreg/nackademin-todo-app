(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"1a3e":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"q-pa-md center bg-grey-9 text-white"},[o("ProfileComponent")],1)},s=[],r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-page",[o("div",{staticClass:"text-h4 text-center"},[e._v("All data on you")]),o("q-btn",{staticClass:"float-right",attrs:{label:"Delete account",color:"red"},on:{click:function(t){return e.deleteProfile()}}}),o("q-btn-dropdown",{staticClass:"glossy q-ma-sm",attrs:{color:"green",icon:"edit",label:"Edit List"}},[o("div",{staticClass:"row no-wrap q-pa-md"},[o("q-input",{attrs:{label:"new username *",autofocus:""},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}}),o("q-separator",{staticClass:"q-mx-lg",attrs:{vertical:"",inset:""}}),o("div",{staticClass:"column items-center"},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"secondary",label:"Update user",push:"",size:"md"},on:{click:function(t){return e.editUsername(e.newName)}}})],1)],1)]),e.allowedCookies?o("p",{staticClass:"text-body1"},[e._v(" You have allowed cookies on this site")]):e._e(),o("div",{staticClass:"row"},[o("ProfileAllTodos"),o("ProfileAllLists")],1),o("ProfileArchive")],1)},n=[],i=(o("e6cf"),o("c973")),l=o.n(i),c=o("ded3"),d=o.n(c),u=o("2f62"),m=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"q-pa-md row items-start q-gutter-md"},[o("div",{staticClass:"text-h4 col-12 text-center"},[e._v("Your completed todos")]),e._l(e.finishedTodos,(function(t,a){return o("div",{key:a},[o("q-card",{staticClass:"my-card",attrs:{flat:"",bordered:""}},[o("q-card-section",{attrs:{horizontal:""}},[o("q-card-section",{staticClass:"q-pt-xs"},[o("div",{staticClass:"text-body1 text-black"},[e._v("\n           Todo title: "+e._s(t.title)+"\n           ")]),o("div",{staticClass:"text-body1 text-black"},[e._v("\n           Todo user: "+e._s(t.userid)+"\n           ")])])],1),o("q-separator"),o("q-card-actions",[o("q-btn",{attrs:{flat:"",color:"primary"}},[e._v("\n           Finished: "+e._s(t.updatedAt)+"\n         ")])],1)],1)],1)}))],2)},p=[],h={name:"ProfileArchive",data(){return{finishedTodos:[],lorem:"Lorem ipsum dolor sit amet, consectetur adipiscing elit.",token:"",test:""}},mounted(){this.token=localStorage.getItem("token"),this.fetchFinished()},computed:d()({},Object(u["b"])(["auth"])),components:{ProfileComponent:W},methods:{fetchFinished(){var e=this;return l()((function*(){yield fetch("/api/todo/?finished=true",{headers:{Authorization:"Bearer "+e.token,"Content-Type":"application/json"}}).then(e=>e.json()).then(t=>{e.finishedTodos=t}).catch(e=>{console.error("There was a error fetching:"+e)})}))()}}},f=h,v=o("2877"),b=o("f09f"),g=o("a370"),C=o("eb85"),k=o("4b7e"),_=o("9c40"),w=o("eebe"),q=o.n(w),T=Object(v["a"])(f,m,p,!1,null,null,null),y=T.exports;q()(T,"components",{QCard:b["a"],QCardSection:g["a"],QSeparator:C["a"],QCardActions:k["a"],QBtn:_["a"]});var x=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"col-6 col-md-6"},[o("q-item-section",{staticClass:"text-h5"},[e._v("All todos on you")]),o("div",{staticClass:"text-h6"},[e._v("Todo Titel & Todo Status")]),e._l(e.allTodos,(function(t,a){return o("q-list",{key:a,staticClass:"q-pa-md bg-grey-2 text-black ",staticStyle:{"max-width":"350px"},attrs:{bordered:"",separator:""}},[o("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[o("q-item-section",[e._v(e._s(t.title))]),o("q-item-section",[e._v(e._s(t.done))])],1)],1)}))],2)},A=[],S={name:"ProfileAllTodos",data(){return{allTodos:[]}},mounted(){this.token=localStorage.getItem("token"),this.fetchAllTodos()},computed:d()({},Object(u["b"])(["auth"])),methods:{fetchAllTodos(){var e=this;return l()((function*(){fetch("/api/users/gdpr/"+e.auth.userid,{headers:{Authorization:"Bearer "+e.token,"Content-Type":"application/json"}}).then(e=>e.json()).then(t=>{e.allTodos=t.todos}).catch(e=>{console.error("There was a error fetching:"+e)})}))()}}},P=S,j=o("4074"),Q=o("1c1c"),L=o("66e5"),I=o("714f"),O=Object(v["a"])(P,x,A,!1,null,null,null),E=O.exports;q()(O,"components",{QItemSection:j["a"],QList:Q["a"],QItem:L["a"]}),q()(O,"directives",{Ripple:I["a"]});var B=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"col-6 col-md-6"},[o("div",{staticClass:"text-h6"},[e._v("List Titel & List Skapare")]),e._l(e.allLists,(function(t,a){return o("q-list",{key:a,staticClass:"q-pa-md bg-grey-2 text-black ",staticStyle:{"max-width":"350px"},attrs:{bordered:"",separator:""}},[o("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[o("q-item-section",[e._v(e._s(t.title))]),o("q-item-section",[e._v(e._s(t.creator))])],1)],1)}))],2)},N=[],z={name:"ProfileAllLists",data(){return{allLists:[]}},mounted(){this.token=localStorage.getItem("token"),this.fetchAllTodos()},computed:d()({},Object(u["b"])(["auth"])),methods:{fetchAllTodos(){var e=this;return l()((function*(){fetch("/api/users/gdpr/"+e.auth.userid,{headers:{Authorization:"Bearer "+e.token,"Content-Type":"application/json"}}).then(e=>e.json()).then(t=>{e.allLists=t.lists}).catch(e=>{console.error("There was a error fetching:"+e)})}))()}}},U=z,$=Object(v["a"])(U,B,N,!1,null,null,null),D=$.exports;q()($,"components",{QList:Q["a"],QItem:L["a"],QItemSection:j["a"]}),q()($,"directives",{Ripple:I["a"]});class F{static editUser(e,t,o){return l()((function*(){return console.log(e),console.log(o),console.log("making full users request for id "+t),yield fetch("api/users/"+t,{method:"PATCH",headers:{Authorization:"Bearer "+o,"Content-Type":"application/json"},body:JSON.stringify({username:e})})}))()}}var J=F,R={name:"TodoArchive",props:{theuser:String},data(){return{token:"",name:"",allowedCookies:!1,newUsername:""}},mounted(){this.token=localStorage.getItem("token"),this.allowedCookies=localStorage.getItem("allowCokokie")},computed:d()({},Object(u["b"])(["auth"])),components:{ProfileArchive:y,ProfileAllTodos:E,ProfileAllLists:D},methods:{deleteProfile(){var e=this;return l()((function*(){const t=yield fetch("/api/users/"+e.auth.userid,{method:"DELETE",headers:{Authorization:"Bearer "+e.token,"Content-Type":"application/json"}});console.log(t),localStorage.removeItem("token"),localStorage.removeItem("showUsers"),localStorage.removeItem("role"),e.$router.go("/")}))()},editUsername(e){var t=this;return l()((function*(){const o=yield J.editUser(e,t.auth.userid,t.token);console.log(o)}))()}}},Y=R,H=(o("3df0"),o("9989")),G=o("f20b"),K=o("27f9"),M=o("7f67"),V=Object(v["a"])(Y,r,n,!1,null,"268e33c4",null),W=V.exports;q()(V,"components",{QPage:H["a"],QBtn:_["a"],QBtnDropdown:G["a"],QInput:K["a"],QSeparator:C["a"]}),q()(V,"directives",{ClosePopup:M["a"]});var X={name:"LoginPage",data(){return{}},components:{ProfileComponent:W}},Z=X,ee=Object(v["a"])(Z,a,s,!1,null,null,null);t["default"]=ee.exports},"3df0":function(e,t,o){"use strict";var a=o("72a6"),s=o.n(a);s.a},"72a6":function(e,t,o){}}]);